<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile Page</title>

    <script src="/public/js/checkAuth.js" defer></script>
    <script src="http://127.0.0.1:3000/js/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jersey+20&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/bootstrap-5.3.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/public/css/vigilanceHub.css">

    <style>
        .edit-profile-container {
            max-width: 600px;
        }

        body {
            padding-top: 80px;
        }
    </style>
</head>
<body class="web-theme">
    <div id="navbarContainer"></div>

    <div id="editProfilePage" class="container edit-profile-container mt-4">
        <div class="back-to-profile">
            <a id="backToProfile" href="profile.html"><h5>< Back to Profile</h5></a>
        </div>
        <h2 class="text-center">Edit Profile</h2>
        <form id="editProfileForm">
            <br>
            <div id="checkPassword" class="row mb-3">
                <label for="currentPassword" class="form-label">Before you begin, please enter your current password.</label>
                <div class="col-md-6 mb-1">
                    <input type="password" id="currentPassword" class="form-control" placeholder="Enter current password" required>
                    <div id="passwordError" class="incorrect-password" style="color: red;"></div>
                </div>
                <div class="col-md-6 mb-1">
                    <button id="enterCurrentPassword" type="button" class="btn btn-primary" style="font-family: 'Jersey 20'; width: 100px;">Enter</button>
                </div>
            </div>
            <br>
            <div id="editableFields" style="display: none;">
                <div class="mb-3">
                    <label for="newUsername" class="form-label">New Username</label>
                    <input type="text" id="newUsername" class="form-control" placeholder="New username">
                    <div id="usernameError" class="text-danger mt-2"></div>
                    <small class="form-text username-req"> 
                        (must be between 5 and 20 characters long and cannot include spaces or special characters)
                    </small>
                </div>
    
                <div class="row">
                    <div class="col-md-6 mb-1">
                        <label for="newPassword" class="form-label">New Password</label>
                        <input type="password" id="newPassword" class="form-control" placeholder="New password">
                        <small class="form-text password-req"> 
                            (must be at least 8 characters long, including one uppercase and lowercase letter, digit, and special character)
                        </small>
                    </div>
                    <div class="col-md-6 mb-1">
                        <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                        <input type="password" id="confirmNewPassword" class="form-control" placeholder="Confirm new password">
                        <div id="passwordError" class="text-danger mt-2"></div>
                    </div>
                </div>
                <br>
                <div class="mb-3">
                    <label class="form-label">Choose an Avatar</label>
                    <div id="chooseAvatar" class="choose-avatar">
                        <div class="avatar-container">
                            <img src="/public/images/avatars/smile.png" alt="Avatar 1" data-avatar="smile.png">
                            <img src="/public/images/avatars/sunglass.png" alt="Avatar 2" data-avatar="sunglass.png">
                            <img src="/public/images/avatars/moneyface.png" alt="Avatar 3" data-avatar="moneyface.png">
                            <img src="/public/images/avatars/shock.png" alt="Avatar 4" data-avatar="shock.png">
                            <img src="/public/images/avatars/sleep.png" alt="Avatar 5" data-avatar="sleep.png">
                        </div>
                        <div class="avatar-container">
                            <img src="/public/images/avatars/cat.png" alt="Avatar 6" data-avatar="cat.png">
                            <img src="/public/images/avatars/gameicon.png" alt="Avatar 7" data-avatar="gameicon.png">
                            <img src="/public/images/avatars/devil.png" alt="Avatar 8" data-avatar="devil.png">
                            <img src="/public/images/avatars/ghost.png" alt="Avatar 9" data-avatar="ghost.png">
                            <img src="/public/images/avatars/default.png" alt="Default Icon" data-avatar="default.png">
                        </div>
                    </div>
                    <input type="hidden" id="chooseAvatar" name="chooseAvatar">
                </div><br>
                <div class="text-center">
                    <button type="submit" class="btn btn-primary save-edit-btn">Save Changes</button>
                </div><br>
                <div class="text-center delete-acc-link">
                    <img src="/public/images/icons/trashbin.png" alt="Delete">
                    <a id="deleteAccLink"><h5>DELETE Account</h5></a>
                </div>
            </div>
        </form>
    </div>

    <div id="footerContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/public/js/jquery-3.7.1.min.js"></script>
    <script src="/public/js/edit_profile.js"></script>
    <script src="/public/js/validation.js"></script>
    <script>
        $(document).ready(function(){
            $("#navbarContainer").load("/misc_html/navbar_userLogin.html");
            $("#footerContainer").load("/misc_html/footer.html");

            $('.choose-avatar img').on('click', function() {
                $('.choose-avatar img').removeClass('selected');
                $(this).addClass('selected');
                $('#chooseAvatar').val($(this).data('avatar'));
            });
        });
    </script>
</body>
</html>
